(function(b){function a(d){var c=document.createElement("DIV");c.innerHTML=d;return c.textContent||c.innerText||""}b.ui.autocomplete.prototype._renderItem=function(d,f){var c=this.term;var h=("group" in f)?"first":"";var i='<div class="ui-autocomplete-fields '+h+'">';f.value=a(f.value);f.label=Drupal.checkPlain(f.label);if(f.fields){b.each(f.fields,function(k,m){var l=new RegExp("("+b.trim(c)+")","gi");var j=Drupal.checkPlain(m);if(m.indexOf("src=")==-1&&m.indexOf("href=")==-1){j=j.replace(l,"<span class='ui-autocomplete-field-term'>$1</span>");i+=('<div class="ui-autocomplete-field-'+k+'">'+j+"</div>")}else{i+=('<div class="ui-autocomplete-field-'+k+'">'+m+"</div>")}})}else{i+=('<div class="ui-autocomplete-field">'+f.label+"</div>")}i+="</div>";var g="";if("group" in f){groupId=typeof(f.group.group_id)!=="undefined"?f.group.group_id:"";groupName=typeof(f.group.group_name)!=="undefined"?f.group.group_name:"";g+=('<div class="ui-autocomplete-field-group '+groupId+'">'+groupName+"</div>");b(g).appendTo(d)}var e=b("<li class=ui-menu-item-"+h+"></li>").append("<a>"+i+"</a>");if(f.value==""){e=b("<li class='ui-state-disabled ui-menu-item-"+h+" ui-menu-item'>"+f.label+"</li>")}e.data("item.autocomplete",f).appendTo(d);Drupal.attachBehaviors(e);return e};b.ui.autocomplete.prototype._resizeMenu=function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth()+5,this.options.position.of==null?this.element.outerWidth():this.options.position.of.outerWidth()))};Drupal.behaviors.search_autocomplete={attach:function(c){if(Drupal.settings.search_autocomplete){b.each(Drupal.settings.search_autocomplete,function(d,e){b(Drupal.settings.search_autocomplete[d].selector).bind("mouseover",function(){b(Drupal.settings.search_autocomplete[d].selector).addClass("form-autocomplete ui-autocomplete-processed").attr("data-sa-theme",Drupal.settings.search_autocomplete[d].theme).autocomplete({minLength:Drupal.settings.search_autocomplete[d].minChars,source:function(h,f){b(Drupal.settings.search_autocomplete[d].selector).addClass("throbbing");if(Drupal.settings.search_autocomplete[d].type=="external"){b.getJSON(Drupal.settings.search_autocomplete[d].datas,{q:encodeURIComponent(h.term)},function(i){if(i.length){i.slice(0,Drupal.settings.search_autocomplete[d].max_sug)}f(i)})}else{if(Drupal.settings.search_autocomplete[d].type=="internal"||Drupal.settings.search_autocomplete[d].type=="view"){b.getJSON(Drupal.settings.search_autocomplete[d].datas,h,function(i){if(i.length){i.slice(0,Drupal.settings.search_autocomplete[d].max_sug)}f(i)})}else{if(Drupal.settings.search_autocomplete[d].type=="static"){var g=b.ui.autocomplete.filter(Drupal.settings.search_autocomplete[d].datas,h.term);if(g.length){g.slice(0,Drupal.settings.search_autocomplete[d].max_sug)}f(g)}}}},open:function(f,g){b(".ui-autocomplete li.ui-menu-item:odd").addClass("ui-menu-item-odd");b(".ui-autocomplete li.ui-menu-item:even").addClass("ui-menu-item-even");b(Drupal.settings.search_autocomplete[d].selector).removeClass("throbbing")},select:function(f,g){if(Drupal.settings.search_autocomplete[d].auto_redirect==1&&g.item.link){document.location.href=g.item.link}else{if(Drupal.settings.search_autocomplete[d].auto_submit==1&&g.item.value){b(this).val(g.item.value);b(this).closest("form").submit()}}},focus:function(f,g){if(typeof g.item.group!=="undefined"){if(g.item.group.group_id=="no_results"||g.item.group.group_id=="all_results"){f.preventDefault()}}},appendTo:b(Drupal.settings.search_autocomplete[d].selector).parent()}).autocomplete("widget").attr("data-sa-theme",Drupal.settings.search_autocomplete[d].theme)});b(Drupal.settings.search_autocomplete[d].selector).trigger("mouseover")})}}}})(jQuery);